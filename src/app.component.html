<div class="min-h-screen flex items-start justify-center pt-8 sm:pt-16 px-4">
  <main class="w-full max-w-2xl">
    <header class="text-center mb-8">
      <h1 class="text-4xl sm:text-5xl font-bold text-indigo-400 drop-shadow-lg flex items-center justify-center gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.25 12l.813 2.846a4.5 4.5 0 01-3.09 3.09L15 18.75l-.813-2.846a4.5 4.5 0 013.09-3.09L18.25 12z"/>
        </svg>
        <span>AI Reminder</span>
      </h1>
      <p class="text-slate-400 mt-2 text-lg">Your tasks, amplified by AI!</p>
    </header>

    <div class="bg-slate-800/60 backdrop-blur-sm rounded-2xl shadow-2xl p-6 sm:p-8 border border-slate-700">
      <!-- Input and Inspire Section -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
        <input
          type="text"
          placeholder="What do you need to do?"
          [value]="newTask()"
          (input)="updateNewTask($event)"
          (keydown.enter)="addTask()"
          class="sm:col-span-2 w-full px-4 py-3 text-slate-200 bg-slate-700 border-2 border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-300 placeholder-slate-400"
        />
        <input
          type="datetime-local"
          [value]="newTaskDueDate()"
          (input)="updateNewTaskDueDate($event)"
          (keydown.enter)="addTask()"
          class="px-4 py-3 text-slate-400 bg-slate-700 border-2 border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow duration-300"
        />
        <button
          (click)="addTask()"
          class="px-5 py-3 font-bold text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-slate-800 transition-transform duration-200 hover:scale-105"
        >
          Add Task
        </button>
      </div>
      <div class="mt-4 text-center">
        <button (click)="getInspiration()" [disabled]="isLoading()" class="relative inline-flex items-center justify-center px-6 py-2 font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-slate-800 transition-all duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed group">
          @if (isLoading()) {
            <span class="flex items-center">
              <svg class="animate-spin -ml-1 mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              Thinking...
            </span>
          } @else {
            <span class="flex items-center gap-2">
              Inspire Me
              <span class="text-xl transition-transform duration-300 group-hover:rotate-12">âœ¨</span>
            </span>
          }
        </button>
      </div>

      <!-- Error Message -->
      @if (error()) {
        <div class="mt-4 p-3 bg-red-500/20 border border-red-500/30 text-red-300 rounded-lg text-center">
          <strong>Oops!</strong> {{ error() }}
        </div>
      }

      <!-- Task List -->
      <div class="mt-8">
        <h2 class="text-xl sm:text-2xl font-bold text-indigo-300 mb-4 border-b-2 border-slate-700 pb-2">My Task List</h2>
        
        @if (sortedTasks().length > 0) {
          <ul class="space-y-3">
            @for (task of sortedTasks(); track task.id) {
              <li 
                class="flex items-center justify-between p-3 bg-slate-800 rounded-lg shadow-sm hover:shadow-lg hover:bg-slate-700/80 transition-all duration-300 group animate-fade-in"
                [class.opacity-40]="task.completed"
              >
                <input type="checkbox" class="h-5 w-5 rounded border-slate-600 bg-slate-700 text-indigo-500 focus:ring-indigo-500" [checked]="task.completed" (change)="toggleComplete(task)">
                
                <div class="flex-grow px-4" (click)="!task.editing && startEditing(task)">
                  @if (task.editing) {
                    <input #editInput
                      type="text"
                      [value]="task.text"
                      (keyup.enter)="saveEdit(task, editInput.value)"
                      (keyup.escape)="cancelEdit(task)"
                      (blur)="saveEdit(task, editInput.value)"
                      class="w-full bg-transparent focus:outline-none p-1 -m-1 rounded text-slate-100"
                      autofocus
                    />
                  } @else {
                    <p class="text-slate-200 cursor-pointer" [class.line-through]="task.completed">{{ task.text }}</p>
                  }
                  @if (task.dueDate) {
                    <div class="text-xs text-slate-400 flex items-center gap-1 mt-1">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.415L11 9.586V6z" clip-rule="evenodd" /></svg>
                      <span>{{ task.dueDate | date:'MMM d, y, h:mm a' }}</span>
                    </div>
                  }
                </div>
                
                <button (click)="deleteTask(task.id)" class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-red-500/10 text-red-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-red-500/20 hover:text-red-300 focus:outline-none focus:ring-2 focus:ring-red-500">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                  </svg>
                </button>
              </li>
            }
          </ul>
        } @else {
          <div class="text-center py-8 px-4 bg-slate-800/50 rounded-lg border-2 border-dashed border-slate-700">
            <p class="text-slate-500">Your task list is empty.</p>
            <p class="text-slate-500 mt-1">Add a new task or get inspired by AI!</p>
          </div>
        }
      </div>
    </div>
    
    <footer class="text-center mt-8 text-slate-500 text-sm">
      <p>Built with Angular, Tailwind, and a sprinkle of Gemini magic.</p>
    </footer>
  </main>
</div>

<style>
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in {
    animation: fade-in 0.3s ease-out forwards;
  }
  input[type="datetime-local"]::-webkit-calendar-picker-indicator {
    cursor: pointer;
    opacity: 0.6;
    filter: invert(1);
  }
</style>